ingress:
  enabled: true 
  className: "nginx"
  annotations:
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
    nginx.ingress.kubernetes.io/backend-protocol: "HTTP"
    nginx.ingress.kubernetes.io/proxy-buffer-size: "16k"
    nginx.ingress.kubernetes.io/x-forwarded-prefix: "/"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "3600"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "3600"
  controllerIP: ""
  domain: "demo.local"
  hosts:
    - host: config
      paths:
        - path: /
          pathType: Prefix
          service: config
    - host: api
      paths:
        - path: /
          pathType: Prefix
          service: api
    - host: app
      paths:
        - path: /
          pathType: Prefix
          service: app
  tls:
    enabled: true
    secretName: demo-tls  
provider:
  enabled: true
  connectionString: ""
  certificateTrust:
    enabled: true
  hostAliases:
    enabled: true
    ip: ""
  refreshInterval: "30s"
  selectors:
    - keyFilter: "*"
emulator:
  enabled: true
  image:
    repository: mcr.microsoft.com/azure-app-configuration/app-configuration-emulator
    tag: 1.0.0-preview
    pullPolicy: IfNotPresent
  resources:
    limits:
      memory: "512Mi"
      cpu: "250m"
    requests:
      memory: "256Mi"
      cpu: "125m"
  host: "config"
  port: 8483
  accessKey:
    id: "emulator"
    name: "emulator"
    secret: "emulator"
configMap:
  name: app-config
  data:
    key: settings.json
    type: json
    separator: __  
volume:
  hostPath:
    path: /mnt/data
    type: DirectoryOrCreate
  mountPath: /app/data
  verification:
    enabled: true
    image:
      repository: busybox
      tag: "1.36"
      pullPolicy: IfNotPresent
    requiredFiles:
      - "books_data.csv"
      - "books_rating.csv"
    resources:
      requests:
        memory: "64Mi"
        cpu: "50m"
      limits:
        memory: "128Mi"
        cpu: "100m"
    backoffLimit: 3
    activeDeadlineSeconds: 300
api:
  image:
    repository: api
    tag: latest
    pullPolicy: IfNotPresent
  host: "api"
  port: 8080
  env:
    - name: PYTHON_ENV
      value: "development"
    - name: DEBUG
      value: "1"
    - name: BOOKS_DATA_PATH
      value: "/app/data/books_data.csv"
    - name: BOOKS_RATING_PATH
      value: "/app/data/books_rating.csv"
  configPath: "/app/settings.json"
  resources:
    limits:
      memory: "512Mi"
      cpu: "250m"
    requests:
      memory: "256Mi"
      cpu: "125m"
app:
  image:
    repository: app
    tag: latest
    pullPolicy: IfNotPresent
  host: "app"
  port: 8080
  env:
    - name: NODE_ENV
      value: "development"
  configPath: "/app/settings.json"
  resources:
    limits:
      memory: "512Mi"
      cpu: "250m"
    requests:
      memory: "256Mi"
      cpu: "125m"
